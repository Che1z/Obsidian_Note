Time To Live (TTL)
### DNS TTL 的運作原理

1. **TTL 值設定**：DNS 資料的 TTL 值是由原始 DNS 記錄的擁有者（例如域名管理者）設置的，通常以秒為單位。假設 TTL 設定為 300 秒，這意味著當 DNS 客戶端或快取伺服器查詢到這條 DNS 記錄後，會將其保存 300 秒。
    
2. **DNS 快取過程**：當你查詢某個域名的 IP 位址時（例如 `www.example.com`），本地 DNS 客戶端（例如你的電腦）或中間的 DNS 快取伺服器會暫時記住這個查詢結果。在 300 秒內，當你或其他用戶再次查詢相同域名時，系統可以直接從快取中取回 IP，而無需重新查詢權威 DNS 伺服器。
    
3. **300 秒內不會重新查詢**：在這段時間內，即便原始的 IP 位址發生了更改，DNS 客戶端或快取伺服器都不會再向上級 DNS 伺服器查詢更新的 IP。只有等到 300 秒過去，這條快取記錄過期，才會再次向 DNS 伺服器查詢最新的記錄。
    

### 這句話的實際含義

- **300 秒內無法獲取 DNS 的最新變更**：假如某個域名的 IP 位址在 TTL 期間內（300 秒內）更改了，而你的 DNS 快取中還保存著舊的 IP 位址，那麼在這 300 秒內，系統依然會使用舊的 IP，導致無法即時獲取變更。
- **減少查詢次數**：TTL 設定可以降低 DNS 伺服器的負載，因為客戶端和中間的快取伺服器不需要頻繁查詢相同的 DNS 記錄。

### 例子

假設 `www.example.com` 的 DNS 記錄有一個 TTL 值為 300 秒的 A 記錄，指向 IP `192.168.1.10`。流程如下：

1. **第一次查詢**：當你查詢 `www.example.com` 時，本地 DNS 伺服器向權威 DNS 伺服器請求 IP，並將結果快取 300 秒。
2. **變更 IP（在 TTL 內）**：假設在 100 秒後，`www.example.com` 的 IP 被更改為 `192.168.1.20`。但由於 TTL 尚未過期，你的本地 DNS 快取仍保留著舊的 IP（`192.168.1.10`），直到 300 秒過期為止。
3. **300 秒過期後的查詢**：300 秒過去後，再次查詢 `www.example.com` 時，DNS 伺服器會重新向權威伺服器查詢最新的 IP 地址，並更新快取。

### 總結

"快取 300 秒內不能存取 DNS" 意思是指在這 300 秒的 TTL 期間內，DNS 快取不會重新向 DNS 伺服器查詢該域名的 IP，因而無法即時獲得該記錄的最新變更。如果需要即時反映變更（例如更改了域名 IP），則必須等待快取的 TTL 時間過期，或手動清除快取。