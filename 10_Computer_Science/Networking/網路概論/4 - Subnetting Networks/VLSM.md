Variable Length Subnet Masking (VLSM) 是一種靈活的 IP 子網劃分方式，它允許根據不同網段的需求來分配不同長度的子網掩碼。
這種方法避免了傳統固定長度子網掩碼（Classful Subnet Masking）可能造成的 IP 地址浪費，使網路管理更加高效。

### VLSM 的主要特點

1. **靈活性**：可以根據子網中的主機需求，為每個子網分配不同的子網掩碼長度。
2. **更高的地址利用率**：在一個大型的網路中，VLSM允許根據不同的子網需求靈活地分配 IP，減少浪費。
3. **需求導向的分配**：每個子網的 IP 分配是根據實際需求來劃分的，有些子網可以擁有更多的主機地址，而其他子網則可以有更小的主機數。

### VLSM範例

假設我們有一個網路，需求是分成以下子網：

- **子網A**：要求有60個主機
- **子網B**：要求有30個主機
- **子網C**：要求有10個主機
- **子網D**：要求有5個主機

我們會從網段 `192.168.1.0/24`（這是個 256 個地址的 Class C 網段）來劃分出這些子網。

### 步驟 1：分析每個子網所需的位數

| 子網  | 所需主機數 | 必要位元數 | 最適合的子網掩碼              |
| --- | ----- | ----- | --------------------- |
| 子網A | 60    | 6     | /26 (255.255.255.192) |
| 子網B | 30    | 5     | /27 (255.255.255.224) |
| 子網C | 10    | 4     | /28 (255.255.255.240) |
| 子網D | 5     | 3     | /29 (255.255.255.248) |

### 步驟 2：從大到小分配IP地址段

1. **分配子網A**：
    
    - 網段：`192.168.1.0/26`
    - 地址範圍：`192.168.1.0 - 192.168.1.63`
    - 可用主機數：62（去除網路位址和廣播位址）
2. **分配子網B**：
    
    - 網段：`192.168.1.64/27`
    - 地址範圍：`192.168.1.64 - 192.168.1.95`
    - 可用主機數：30
3. **分配子網C**：
    
    - 網段：`192.168.1.96/28`
    - 地址範圍：`192.168.1.96 - 192.168.1.111`
    - 可用主機數：14
4. **分配子網D**：
    
    - 網段：`192.168.1.112/29`
    - 地址範圍：`192.168.1.112 - 192.168.1.119`
    - 可用主機數：6

### VLSM 的優勢

透過 VLSM，我們有效地利用了 `192.168.1.0/24` 網段中的每一個 IP，避免了使用固定長度子網掩碼可能帶來的地址浪費。每個子網只使用所需的位元數，而不影響其他子網的 IP 分配。

### 總結

VLSM 對於擁有不同大小子網的網路設計非常有用，尤其適合較大或多層次的企業網路。它既滿足了各子網不同的主機需求，又大大提高了 IP 地址的利用效率。