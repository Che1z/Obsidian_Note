Network time protocol

### NTP (Network Time Protocol) 協定

NTP 是用於網路上同步設備之間時間的協定，確保所有設備的系統時間保持一致。
這對於時間敏感的應用或分散式系統而言尤為重要。
NTP 協定可以在公開網路和內部網路中使用，並能夠根據多個時間源調整時鐘，達到更精確的時間同步。

- **伺服器與客戶端角色**：
    
    - **Server**：NTP 伺服器負責向其他設備提供精確的時間資料。
      這些伺服器通常從更高層的 NTP 伺服器或原子鐘、GPS 接收器等精確的時間源獲取時間。
      公用的 NTP 伺服器（如 `pool.ntp.org`）或內部的 NTP 伺服器都是常見的時間提供者。
    - **Client**：NTP 客戶端會向 NTP 伺服器發出請求，以獲取精確的時間資訊。
      客戶端根據伺服器提供的時間來調整自己的系統時鐘。
      許多網路設備（如伺服器、路由器、工作站）都可作為 NTP 客戶端。
- **使用情境**：
    
    1. **企業內部網路**：企業內的設備（如伺服器、工作站）需要保持時間同步，便於日誌紀錄和事件追溯。企業可設置內部 NTP 伺服器，並讓內部所有設備向該伺服器請求時間同步。
    2. **交易系統**：金融系統需要精確的時間戳來記錄交易時間，以便進行法律監管和審計。金融機構會設置本地 NTP 伺服器並連接至全球的 NTP 時間源。
    3. **全球伺服器同步**：分散在全球的伺服器集群使用 NTP 來確保所有伺服器的時間一致，以便在分布式應用中實現一致的數據處理。
- **NTP 常用端口**：
    
    - **Port 123**：NTP 使用 UDP 通訊協定來傳輸時間資料。

---

### 範例說明

假設一個企業內部設有 NTP 伺服器，並將該伺服器設定為整個內部網路的時間源。流程如下：

1. NTP 伺服器連接至更高層的外部 NTP 伺服器（如 `time.google.com`）來獲取精確時間。
2. 內部網路中的每台設備（如工作站、伺服器）定期向內部 NTP 伺服器發出請求，獲取同步的時間。
3. 設備接收伺服器的時間後，調整本機時間以確保與 NTP 伺服器保持一致。

### 總結

|協定|功能|主要端口|角色|使用情境|
|---|---|---|---|---|
|**NTP**|保持設備之間時間同步|123|伺服器提供時間，客戶端請求時間同步|企業網路、金融系統、全球伺服器集群同步|

NTP 是網路中維持時間一致性的重要協定，對於記錄、事件管理及資料一致性來說是不可或缺的工具。