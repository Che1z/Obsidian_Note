**Port Forwarding（端口轉發）** 是一種路由器或防火牆的網路設置，允許外部設備透過指定的埠號，直接訪問內部網路中的特定設備或服務。
這通常用於需要讓外部網路能夠訪問內部伺服器（如網頁伺服器、FTP伺服器或遊戲伺服器）的情況。

### 1. Port Forwarding 的運作原理

在典型的家庭或公司網路中，內部網路中的所有設備通常都使用<mark style="background: #FFF3A3A6;">私有 IP 位址</mark>。
私有 IP 位址無法直接被互聯網訪問，因此需要路由器或防火牆的幫助來進行轉發。
Port Forwarding 的基本流程如下：

1. **外部請求**：當外部設備（例如網際網路上的用戶）發送請求到路由器的公有 IP 位址和特定埠號時，路由器會檢查是否有對應的 Port Forwarding 規則。
    
2. **轉發請求**：如果該埠號有設定 Port Forwarding，路由器會根據規則，將這個請求轉發到內部網路中指定的設備的私有 IP 位址和埠號。
    
3. **接收回應**：內部設備收到請求後，會回應外部設備的請求。路由器會將回應通過該埠號返回給外部設備，完成一次通訊。
    

這樣，外部設備便能透過路由器訪問到內部網路中的特定設備，達到「內部設備對外服務」的效果。

### 2. 使用 Port Forwarding 的情境

Port Forwarding 通常應用於以下幾種情境：

- **遠端存取內部伺服器**：例如，若您想要從外部網路（如公司外的網路）訪問家中或公司內部的網頁伺服器、FTP 伺服器，或任何自建伺服器，可以透過 Port Forwarding 來實現。
    
- **遊戲伺服器**：一些多人遊戲伺服器需要外部用戶連線，這時候可以將特定的遊戲伺服器埠號轉發到內部伺服器，讓外部玩家可以訪問遊戲伺服器。
    
- **遠端桌面**：例如，設定 Port Forwarding 來允許外部的遠端桌面連接到內部網路中的某台電腦。
    

### 3. Port Forwarding 的設置

Port Forwarding 的設置因不同的路由器而異，但通常需要以下步驟：

1. **登入路由器**：進入路由器的管理介面（通常透過瀏覽器輸入路由器的 IP 地址）。
    
2. **找到 Port Forwarding 設定**：在路由器的設定頁面中，找到「Port Forwarding」或「Virtual Server」的選項。
    
3. **設定規則**：設定轉發規則，包括以下資訊：
    
    - **外部埠號（Public Port）**：指定訪問該服務所需的埠號，例如 Web 伺服器使用 80 埠。
    - **內部 IP 位址（Internal IP Address）**：指定內部網路中實際運行該服務的設備 IP 地址。
    - **內部埠號（Internal Port）**：指定內部設備上服務的埠號，通常與外部埠號相同。
4. **保存並應用**：設定完成後，保存並應用 Port Forwarding 設置。
    

### 4. 安全性考量

Port Forwarding 雖然方便，但也可能帶來安全風險，因為它會讓外部網路直接訪問內部設備。為了減少風險，可以考慮以下做法：

- **選擇非標準埠號**：例如，若開放 HTTP 服務，不一定要使用標準的 80 埠，可以使用非標準埠號（例如 8080），以降低被攻擊的風險。
    
- **設定防火牆**：在內部設備上啟用防火牆，並僅允許可信任的 IP 位址訪問。
    
- **啟用 VPN**：將 Port Forwarding 和 VPN 配合使用，讓用戶先透過 VPN 連接到內部網路，再使用 Port Forwarding 訪問內部服務，這樣可以增加安全性。
    

### 5. 與 NAT 的關係

Port Forwarding 是 NAT（Network Address Translation，網路位址轉換）的一種特殊應用。通常 NAT 隱藏了內部網路的私有 IP 位址，使得外部無法直接訪問內部設備。而 Port Forwarding 允許特定的外部請求繞過這個限制，通過 NAT 將請求轉發到內部設備，達到內部設備向外部網路提供服務的目的。

### 總結

Port Forwarding 是一種路由器功能，允許外部網路透過特定埠號訪問內部網路中的設備。它通常用於建立 Web 伺服器、遊戲伺服器等公開服務，但需謹慎設置以避免安全風險。Port Forwarding 是 NAT 的一種應用方式，能夠突破內部網路的訪問限制，實現私有 IP 位址的公開訪問。