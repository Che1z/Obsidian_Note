2024/10/24

### **網路協定的重要性**

網路將不同主機或設備連接在一起，而網路協定（protocol）則負責定義這些設備如何進行通信。協定是網路通信的基石，它確保了不同設備之間的信息傳輸和理解。

### **協定的兩個主要接口**

1. **Service Interface（服務接口）**：
    
    - 是協定層次內部的接口，指同一設備中不同層次之間的互動，例如網路層與傳輸層之間的交互方式。
    - 它定義了上層如何利用下層提供的服務。這個接口通常是抽象的，專注於功能而非細節。
    - 例如：傳輸層通過服務接口來呼叫網路層的傳送功能。
2. **Peer-to-Peer Interface（對等接口）**：
    
    - 是協定在不同設備的同一層之間的通信規範。
    - 每一層的協定都有各自的消息格式與規則，這確保了不同設備在同一層之間能夠相互理解和通信。
    - 例如：兩台設備的傳輸層使用 TCP 協定來進行數據交換。

### **協定應具備的特徵**

1. **Specification（規範）**：  
    每個協定都有一套詳細的規範，定義了協定的行為、狀態轉換和數據格式。這些規範通常以以下形式表達：
    
    - **State Transition Diagram（狀態轉換圖）**：展示協定中的狀態變化，類似於流程圖，描述在不同情況下如何進行狀態切換。
    - **Pseudo-code（伪代码）**：協定實現的簡化版本，幫助理解其運行邏輯。
    - **Message Format（訊息格式）**：定義協定通信中的訊息結構，這包括每個訊息字段的含義、大小和順序。  
        例如，TCP 協定有一個標準的報頭格式，裡面包含了源端口、目的端口、序列號等。
2. **Interoperability（互操作性）**：
    
    - 協定必須具備互操作性，即不同的設備能夠正確實踐該協定，確保不同製造商或不同技術的設備可以相互通信。
    - 這意味著只要遵守該協定規範，任何設備都應能夠相互通信，這是網路協定設計的核心目標之一。

### **補充說明：協定堆疊**

網路協定通常以層次化的形式組織，這稱為協定堆疊（Protocol Stack）。每一層都有不同的功能並負責不同的網路通信任務。常見的協定堆疊模型包括：

1. **OSI 模型**：有七層，從物理層到應用層，逐層定義了如何傳輸數據。
2. **TCP/IP 模型**：是一個簡化的四層模型，包含網路介面層、網路層、傳輸層和應用層。
   
   
   ![[Pasted image 20241024095927.png]]

每一層都使用前一層提供的服務(`FTP, HTTP`使用`TCP`服務)，並為下一層提供功能支持。這種分層結構讓網路協定的設計更加模組化和靈活。